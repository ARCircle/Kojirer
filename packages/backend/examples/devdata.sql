BEGIN;

-- ===============================================
-- 開発用テストデータ (devdata.sql)
-- ===============================================
-- このファイルは開発・テスト環境用のサンプルデータを含みます
--
-- 【データ概要】
-- - customizes: 8種類のカスタマイズ（サイズ3種 + トッピング5種）
-- - customize_prices: 価格履歴データ（2024年→2025年の価格変更を含む）
-- - orders: 5つの注文（SNSフォロー特典のパターン違い）
-- - dons: 10個の丼（全ステータスパターン + 時系列データ）
-- - don_customizes: 22のカスタマイズ関連（SNS特典、数量指定テスト含む）
--
-- 【テストケース】
-- - SNSフォロー特典: 0件、1件、2件のパターン
-- - 丼ステータス: 1(調理中)、2(調理完了)、3(受け取り済み)
-- - 価格履歴: 2024年→2025年の値上げパターン
-- - データ不整合: 意図的な重複サイズ設定
-- - 数量指定: amount=1,2の複数パターン
-- ===============================================

-- Truncate tables to remove existing data
TRUNCATE TABLE don_customizes RESTART IDENTITY CASCADE;
TRUNCATE TABLE customize_prices RESTART IDENTITY CASCADE;
TRUNCATE TABLE customizes RESTART IDENTITY CASCADE;
TRUNCATE TABLE dons RESTART IDENTITY CASCADE;
TRUNCATE TABLE orders RESTART IDENTITY CASCADE;

-- ===============================================
-- カスタマイズマスタデータ
-- ===============================================
INSERT INTO customizes (id, label, available) VALUES
  -- サイズ系カスタマイズ（相互排他的）
  ('0192d8ca-7580-0737-ae8f-4aa2f604155c', '小サイズ', true),
  ('0192d8ca-7580-0cd7-a31f-e7ac2eb0c81f', '中サイズ', true),
  ('0192d8ca-7580-8147-af5a-b976c7081f81', '大サイズ', true),
  -- トッピング系カスタマイズ（複数選択可）
  ('0192d8ca-7580-2a97-9324-2df8785b787f', 'マヨ', true),
  ('0192d8ca-7580-5ad7-8061-2c557bab9c07', 'レモン汁', false), -- 利用不可のテストデータ
  ('0192d8ca-7580-2f87-8e2e-9b04d2137e87', 'カレー粉', true),
  ('0192d8ca-7580-b117-9da4-b484bffed39f', 'コショウ', true),
  ('0192d8ca-7580-3927-8d9c-7e9bdcfd4aa1', 'フライドオニオン', true);

-- ===============================================
-- カスタマイズ価格履歴データ
-- ===============================================
INSERT INTO customize_prices (customize_id, price, since) VALUES
  ('0192d8ca-7580-0737-ae8f-4aa2f604155c', 400, '2024-10-30 00:00:00+09'), -- 小サイズ
  ('0192d8ca-7580-0cd7-a31f-e7ac2eb0c81f', 500, '2024-10-30 00:00:00+09'), -- 中サイズ
  ('0192d8ca-7580-8147-af5a-b976c7081f81', 600, '2024-10-30 00:00:00+09'), -- 大サイズ
  ('0192d8ca-7580-2a97-9324-2df8785b787f', 20, '2024-10-30 00:00:00+09'),  -- マヨ（旧価格）
  ('0192d8ca-7580-5ad7-8061-2c557bab9c07', 20, '2024-10-30 00:00:00+09'),  -- レモン汁（旧価格）
  ('0192d8ca-7580-2f87-8e2e-9b04d2137e87', 20, '2024-10-30 00:00:00+09'),  -- カレー粉（旧価格）
  ('0192d8ca-7580-b117-9da4-b484bffed39f', 20, '2024-10-30 00:00:00+09'),  -- コショウ（旧価格）
  ('0192d8ca-7580-3927-8d9c-7e9bdcfd4aa1', 20, '2024-10-30 00:00:00+09'),  -- フライドオニオン（旧価格）
  -- 値段が更新された想定
  ('0192d8ca-7580-2a97-9324-2df8785b787f', 50, '2025-07-01 00:00:00+09'),  -- マヨ（新価格: 20円→50円）
  ('0192d8ca-7580-5ad7-8061-2c557bab9c07', 50, '2025-07-01 00:00:00+09'),  -- レモン汁（新価格）
  ('0192d8ca-7580-2f87-8e2e-9b04d2137e87', 50, '2025-07-01 00:00:00+09'),  -- カレー粉（新価格）
  ('0192d8ca-7580-b117-9da4-b484bffed39f', 50, '2025-07-01 00:00:00+09'),  -- コショウ（新価格）
  ('0192d8ca-7580-3927-8d9c-7e9bdcfd4aa1', 50, '2025-07-01 00:00:00+09');  -- フライドオニオン（新価格）

-- ===============================================
-- 注文データ（orders）
-- ===============================================
INSERT INTO orders (id, num_sns_followed, create_datetime, call_num) VALUES
  -- 注文11: 過去の注文（SNSフォロー0件、呼び出し番号1）- 単一丼、完了済み
  ('01937fd1-2810-9df7-895b-9f32bcb27be6', 0, '2024-12-01 10:23:54+09', 1),
  -- 注文12: SNSフォロー1件あり（トッピング1個無料）、呼び出し番号2 - 2つの丼
  ('0197c8be-1570-9707-8bbb-ca46862ea248', 1, '2025-07-02 10:26:30+09', 2),
  -- 注文13: 大量注文（4つの丼）、呼び出し番号4 - 様々なステータスでテスト用
  ('0198633e-ecc8-f9d7-949d-670afeb2932c', 0, '2025-08-01 10:28:45+09', 4),
  -- 注文14: シンプルな注文（1つの丼）、呼び出し番号1 - 現在調理中
  ('019902e4-10c8-8c67-99f0-1f1a75abbdae', 0, '2025-09-01 10:28:45+09', 1),
  -- 注文15: SNSフォロー2件あり（トッピング2個無料）、呼び出し番号2 - 2つの丼、一部完了
  ('01999d62-d8c8-6947-8525-10b3bb21beaa', 2, '2025-10-01 10:28:45+09', 2);

-- ===============================================
-- 丼データ（dons）- ステータス: 1=調理中, 2=調理完了, 3=受け取り済み
-- ===============================================
INSERT INTO dons (id, order_id, status, create_datetime, update_datetime) VALUES
  -- 【注文11の丼】過去の完了済み注文 - ステータス3（受け取り済み）
  ('01937fd1-2810-8cb7-b11f-d0d3825c71dd', '01937fd1-2810-9df7-895b-9f32bcb27be6', 3, '2024-12-01 10:23:54+09', '2024-12-01 10:35:12+09'),

  -- 【注文12の丼】SNSフォロー特典あり注文 - 2つの丼で異なるステータス
  -- 丼1: ステータス3（受け取り済み）- サイズ重複設定のテストケース
  ('0197c8be-1570-6597-9217-7e968b9041b5', '0197c8be-1570-9707-8bbb-ca46862ea248', 3, '2025-07-02 10:26:30+09', '2025-07-02 10:45:15+09'),
  -- 丼2: ステータス2（調理完了）- 大サイズ + 複数トッピング
  ('0197c8be-1570-aba7-8305-6b7b365e9d42', '0197c8be-1570-9707-8bbb-ca46862ea248', 2, '2025-07-02 10:26:30+09', '2025-07-02 10:40:22+09'),

  -- 【注文13の丼】大量注文（4つ）- 全ステータスパターンのテスト用
  -- 丼1: ステータス3（受け取り済み）- シンプルなマヨのみ
  ('0198633e-ecc8-89a7-a5c8-5163c354d0a9', '0198633e-ecc8-f9d7-949d-670afeb2932c', 3, '2025-08-01 10:28:45+09', '2025-08-01 10:50:30+09'),
  -- 丼2: ステータス3（受け取り済み）- 中サイズ + 複数トッピング
  ('0198633e-ecc8-5e77-a466-8f7e1cd063fa', '0198633e-ecc8-f9d7-949d-670afeb2932c', 3, '2025-08-01 10:28:45+09', '2025-08-01 10:52:10+09'),
  -- 丼3: ステータス2（調理完了）- 小サイズ + マヨ大盛り
  ('0198633e-ecc8-55f7-aaa1-9b92e5fe88fc', '0198633e-ecc8-f9d7-949d-670afeb2932c', 2, '2025-08-01 10:28:45+09', '2025-08-01 10:42:30+09'),
  -- 丼4: ステータス1（調理中）- 大サイズ + フルトッピング（数量指定テスト）
  ('0198633e-ecc8-0907-9868-7b9079ff3d2a', '0198633e-ecc8-f9d7-949d-670afeb2932c', 1, '2025-08-01 10:28:45+09', '2025-08-01 10:28:45+09'),

  -- 【注文14の丼】シンプルな現在進行中注文 - ステータス1（調理中）
  ('019902e4-10c8-6d37-8b69-566d7a063a52', '019902e4-10c8-8c67-99f0-1f1a75abbdae', 1, '2025-09-01 10:28:45+09', '2025-09-01 10:28:45+09'),

  -- 【注文15の丼】SNSフォロー2件特典あり - 2つの丼で進行状況が異なる
  -- 丼1: ステータス2（調理完了）- 大サイズ + 複数トッピング
  ('01999d62-d8c8-1be7-957b-6155c36a856d', '01999d62-d8c8-6947-8525-10b3bb21beaa', 2, '2025-10-01 10:28:45+09', '2025-10-01 10:45:20+09'),
  -- 丼2: ステータス1（調理中）- 小サイズ + フライドオニオン
  ('01999d62-d8c8-5d77-9eb6-197685ec193a', '01999d62-d8c8-6947-8525-10b3bb21beaa', 1, '2025-10-01 10:28:45+09', '2025-10-01 10:28:45+09');

-- ===============================================
-- 丼カスタマイズ関係データ（don_customizes）
-- SNS特典: フォロー数分のトッピングが無料
-- ===============================================
INSERT INTO don_customizes (don_id, customize_id, amount) VALUES
  -- 【注文12のカスタマイズ】SNSフォロー1件 → トッピング1個無料
  -- 丼1 (440022): 意図的なサイズ重複設定（データ不整合テスト用）
  ('0197c8be-1570-6597-9217-7e968b9041b5', '0192d8ca-7580-0737-ae8f-4aa2f604155c', 1), -- 小サイズ (400円)
  ('0197c8be-1570-6597-9217-7e968b9041b5', '0192d8ca-7580-0cd7-a31f-e7ac2eb0c81f', 1), -- 中サイズ (500円) ※重複
  -- 丼2 (440023): 大サイズ + 複数トッピング（SNS特典1個無料適用）
  ('0197c8be-1570-aba7-8305-6b7b365e9d42', '0192d8ca-7580-8147-af5a-b976c7081f81', 1), -- 大サイズ (600円)
  ('0197c8be-1570-aba7-8305-6b7b365e9d42', '0192d8ca-7580-2a97-9324-2df8785b787f', 1), -- マヨ (50円) ← SNS特典で無料
  ('0197c8be-1570-aba7-8305-6b7b365e9d42', '0192d8ca-7580-2f87-8e2e-9b04d2137e87', 1), -- カレー粉 (50円)

  -- 【注文13のカスタマイズ】SNSフォロー0件 → 全額課金
  -- 丼1 (440024): シンプルなマヨのみ
  ('0198633e-ecc8-89a7-a5c8-5163c354d0a9', '0192d8ca-7580-2a97-9324-2df8785b787f', 1), -- マヨ (50円)
  -- 丼2 (440025): 中サイズ + 複数トッピング
  ('0198633e-ecc8-5e77-a466-8f7e1cd063fa', '0192d8ca-7580-0cd7-a31f-e7ac2eb0c81f', 1), -- 中サイズ (500円)
  ('0198633e-ecc8-5e77-a466-8f7e1cd063fa', '0192d8ca-7580-b117-9da4-b484bffed39f', 1), -- コショウ (50円)
  ('0198633e-ecc8-5e77-a466-8f7e1cd063fa', '0192d8ca-7580-3927-8d9c-7e9bdcfd4aa1', 1), -- フライドオニオン (50円)
  -- 丼3 (440026): 小サイズ + マヨ大盛り（amount=2のテスト）
  ('0198633e-ecc8-55f7-aaa1-9b92e5fe88fc', '0192d8ca-7580-0737-ae8f-4aa2f604155c', 1), -- 小サイズ (400円)
  ('0198633e-ecc8-55f7-aaa1-9b92e5fe88fc', '0192d8ca-7580-2a97-9324-2df8785b787f', 2), -- マヨ×2 (50円×2=100円)
  -- 丼4 (440027): 大サイズ + フルトッピング（数量指定の複雑なテストケース）
  ('0198633e-ecc8-0907-9868-7b9079ff3d2a', '0192d8ca-7580-8147-af5a-b976c7081f81', 1), -- 大サイズ (600円)
  ('0198633e-ecc8-0907-9868-7b9079ff3d2a', '0192d8ca-7580-2f87-8e2e-9b04d2137e87', 1), -- カレー粉 (50円)
  ('0198633e-ecc8-0907-9868-7b9079ff3d2a', '0192d8ca-7580-b117-9da4-b484bffed39f', 1), -- コショウ (50円)
  ('0198633e-ecc8-0907-9868-7b9079ff3d2a', '0192d8ca-7580-3927-8d9c-7e9bdcfd4aa1', 2), -- フライドオニオン×2 (50円×2=100円)

  -- 【注文14のカスタマイズ】SNSフォロー0件、シンプル注文
  ('019902e4-10c8-6d37-8b69-566d7a063a52', '0192d8ca-7580-0cd7-a31f-e7ac2eb0c81f', 1), -- 中サイズ (500円)

  -- 【注文15のカスタマイズ】SNSフォロー2件 → トッピング2個無料
  -- 丼1 (440029): 大サイズ + 複数トッピング（SNS特典2個無料適用）
  ('01999d62-d8c8-1be7-957b-6155c36a856d', '0192d8ca-7580-8147-af5a-b976c7081f81', 1), -- 大サイズ (600円)
  ('01999d62-d8c8-1be7-957b-6155c36a856d', '0192d8ca-7580-2a97-9324-2df8785b787f', 1), -- マヨ (50円) ← SNS特典で無料
  ('01999d62-d8c8-1be7-957b-6155c36a856d', '0192d8ca-7580-2f87-8e2e-9b04d2137e87', 1), -- カレー粉 (50円) ← SNS特典で無料
  -- 丼2 (440030): 小サイズ + フライドオニオン（シンプル）
  ('01999d62-d8c8-5d77-9eb6-197685ec193a', '0192d8ca-7580-0737-ae8f-4aa2f604155c', 1), -- 小サイズ (400円)
  ('01999d62-d8c8-5d77-9eb6-197685ec193a', '0192d8ca-7580-3927-8d9c-7e9bdcfd4aa1', 1); -- フライドオニオン (50円)

COMMIT;
