BEGIN;

-- ===============================================
-- 開発用テストデータ (devdata.sql)
-- ===============================================
-- このファイルは開発・テスト環境用のサンプルデータを含みます
--
-- 【データ概要】
-- - customizes: 8種類のカスタマイズ（サイズ3種 + トッピング5種）
-- - customize_prices: 価格履歴データ（2024年→2025年の価格変更を含む）
-- - orders: 5つの注文（SNSフォロー特典のパターン違い）
-- - dons: 10個の丼（全ステータスパターン + 時系列データ）
-- - don_customizes: 22のカスタマイズ関連（SNS特典、数量指定テスト含む）
--
-- 【テストケース】
-- - SNSフォロー特典: 0件、1件、2件のパターン
-- - 丼ステータス: 1(調理中)、2(調理完了)、3(受け取り済み)
-- - 価格履歴: 2024年→2025年の値上げパターン
-- - データ不整合: 意図的な重複サイズ設定
-- - 数量指定: amount=1,2の複数パターン
-- ===============================================

-- Truncate tables to remove existing data
TRUNCATE TABLE don_customizes RESTART IDENTITY CASCADE;
TRUNCATE TABLE customize_prices RESTART IDENTITY CASCADE;
TRUNCATE TABLE customizes RESTART IDENTITY CASCADE;
TRUNCATE TABLE dons RESTART IDENTITY CASCADE;
TRUNCATE TABLE orders RESTART IDENTITY CASCADE;

-- ===============================================
-- カスタマイズマスタデータ
-- ===============================================
INSERT INTO customizes (id, label, available) VALUES
  -- サイズ系カスタマイズ（相互排他的）
  ('550e8400-e29b-41d4-a716-446655440001', '小サイズ', true),
  ('550e8400-e29b-41d4-a716-446655440002', '中サイズ', true),
  ('550e8400-e29b-41d4-a716-446655440003', '大サイズ', true),
  -- トッピング系カスタマイズ（複数選択可）
  ('550e8400-e29b-41d4-a716-446655440004', 'マヨ', true),
  ('550e8400-e29b-41d4-a716-446655440005', 'レモン汁', false), -- 利用不可のテストデータ
  ('550e8400-e29b-41d4-a716-446655440006', 'カレー粉', true),
  ('550e8400-e29b-41d4-a716-446655440007', 'コショウ', true),
  ('550e8400-e29b-41d4-a716-446655440008', 'フライドオニオン', true);

-- ===============================================
-- カスタマイズ価格履歴データ
-- ===============================================
INSERT INTO customize_prices (customize_id, price, since) VALUES
  -- 2024年10月30日時点の価格設定
  ('550e8400-e29b-41d4-a716-446655440001', 400, '2024-10-30 00:00:00+09'), -- 小サイズ
  ('550e8400-e29b-41d4-a716-446655440002', 500, '2024-10-30 00:00:00+09'), -- 中サイズ
  ('550e8400-e29b-41d4-a716-446655440003', 600, '2024-10-30 00:00:00+09'), -- 大サイズ
  ('550e8400-e29b-41d4-a716-446655440004', 20, '2024-10-30 00:00:00+09'),  -- マヨ（旧価格）
  ('550e8400-e29b-41d4-a716-446655440005', 20, '2024-10-30 00:00:00+09'),  -- レモン汁（旧価格）
  ('550e8400-e29b-41d4-a716-446655440006', 20, '2024-10-30 00:00:00+09'),  -- カレー粉（旧価格）
  ('550e8400-e29b-41d4-a716-446655440007', 20, '2024-10-30 00:00:00+09'),  -- コショウ（旧価格）
  ('550e8400-e29b-41d4-a716-446655440008', 20, '2024-10-30 00:00:00+09'),  -- フライドオニオン（旧価格）
  -- 2025年7月1日からの値上げ後価格（価格履歴テスト用）
  ('550e8400-e29b-41d4-a716-446655440004', 50, '2025-07-01 00:00:00+09'),  -- マヨ（新価格: 20円→50円）
  ('550e8400-e29b-41d4-a716-446655440005', 50, '2025-07-01 00:00:00+09'),  -- レモン汁（新価格）
  ('550e8400-e29b-41d4-a716-446655440006', 50, '2025-07-01 00:00:00+09'),  -- カレー粉（新価格）
  ('550e8400-e29b-41d4-a716-446655440007', 50, '2025-07-01 00:00:00+09'),  -- コショウ（新価格）
  ('550e8400-e29b-41d4-a716-446655440008', 50, '2025-07-01 00:00:00+09');  -- フライドオニオン（新価格）

-- ===============================================
-- 注文データ（orders）
-- ===============================================
INSERT INTO orders (id, num_sns_followed, create_datetime, call_num) VALUES
  -- 注文11: 過去の注文（SNSフォロー0件、呼び出し番号1）- 単一丼、完了済み
  ('550e8400-e29b-41d4-a716-446655440011', 0, '2024-12-01 10:23:54+09', 1),
  -- 注文12: SNSフォロー1件あり（トッピング1個無料）、呼び出し番号2 - 2つの丼
  ('550e8400-e29b-41d4-a716-446655440012', 1, '2025-07-02 10:26:30+09', 2),
  -- 注文13: 大量注文（4つの丼）、呼び出し番号4 - 様々なステータスでテスト用
  ('550e8400-e29b-41d4-a716-446655440013', 0, '2025-08-01 10:28:45+09', 4),
  -- 注文14: シンプルな注文（1つの丼）、呼び出し番号1 - 現在調理中
  ('550e8400-e29b-41d4-a716-446655440014', 0, '2025-09-01 10:28:45+09', 1),
  -- 注文15: SNSフォロー2件あり（トッピング2個無料）、呼び出し番号2 - 2つの丼、一部完了
  ('550e8400-e29b-41d4-a716-446655440015', 2, '2025-10-01 10:28:45+09', 2);

-- ===============================================
-- 丼データ（dons）- ステータス: 1=調理中, 2=調理完了, 3=受け取り済み
-- ===============================================
INSERT INTO dons (id, order_id, status, create_datetime, update_datetime) VALUES
  -- 【注文11の丼】過去の完了済み注文 - ステータス3（受け取り済み）
  ('550e8400-e29b-41d4-a716-446655440021', '550e8400-e29b-41d4-a716-446655440011', 3, '2024-12-01 10:23:54+09', '2024-12-01 10:35:12+09'),

  -- 【注文12の丼】SNSフォロー特典あり注文 - 2つの丼で異なるステータス
  -- 丼1: ステータス3（受け取り済み）- サイズ重複設定のテストケース
  ('550e8400-e29b-41d4-a716-446655440022', '550e8400-e29b-41d4-a716-446655440012', 3, '2025-07-02 10:26:30+09', '2025-07-02 10:45:15+09'),
  -- 丼2: ステータス2（調理完了）- 大サイズ + 複数トッピング
  ('550e8400-e29b-41d4-a716-446655440023', '550e8400-e29b-41d4-a716-446655440012', 2, '2025-07-02 10:26:30+09', '2025-07-02 10:40:22+09'),

  -- 【注文13の丼】大量注文（4つ）- 全ステータスパターンのテスト用
  -- 丼1: ステータス3（受け取り済み）- シンプルなマヨのみ
  ('550e8400-e29b-41d4-a716-446655440024', '550e8400-e29b-41d4-a716-446655440013', 3, '2025-08-01 10:28:45+09', '2025-08-01 10:50:30+09'),
  -- 丼2: ステータス3（受け取り済み）- 中サイズ + 複数トッピング
  ('550e8400-e29b-41d4-a716-446655440025', '550e8400-e29b-41d4-a716-446655440013', 3, '2025-08-01 10:28:45+09', '2025-08-01 10:52:10+09'),
  -- 丼3: ステータス2（調理完了）- 小サイズ + マヨ大盛り
  ('550e8400-e29b-41d4-a716-446655440026', '550e8400-e29b-41d4-a716-446655440013', 2, '2025-08-01 10:28:45+09', '2025-08-01 10:42:30+09'),
  -- 丼4: ステータス1（調理中）- 大サイズ + フルトッピング（数量指定テスト）
  ('550e8400-e29b-41d4-a716-446655440027', '550e8400-e29b-41d4-a716-446655440013', 1, '2025-08-01 10:28:45+09', '2025-08-01 10:28:45+09'),

  -- 【注文14の丼】シンプルな現在進行中注文 - ステータス1（調理中）
  ('550e8400-e29b-41d4-a716-446655440028', '550e8400-e29b-41d4-a716-446655440014', 1, '2025-09-01 10:28:45+09', '2025-09-01 10:28:45+09'),

  -- 【注文15の丼】SNSフォロー2件特典あり - 2つの丼で進行状況が異なる
  -- 丼1: ステータス2（調理完了）- 大サイズ + 複数トッピング
  ('550e8400-e29b-41d4-a716-446655440029', '550e8400-e29b-41d4-a716-446655440015', 2, '2025-10-01 10:28:45+09', '2025-10-01 10:45:20+09'),
  -- 丼2: ステータス1（調理中）- 小サイズ + フライドオニオン
  ('550e8400-e29b-41d4-a716-446655440030', '550e8400-e29b-41d4-a716-446655440015', 1, '2025-10-01 10:28:45+09', '2025-10-01 10:28:45+09');

-- ===============================================
-- 丼カスタマイズ関係データ（don_customizes）
-- SNS特典: フォロー数分のトッピングが無料
-- ===============================================
INSERT INTO don_customizes (don_id, customize_id, amount) VALUES
  -- 【注文12のカスタマイズ】SNSフォロー1件 → トッピング1個無料
  -- 丼1 (440022): 意図的なサイズ重複設定（データ不整合テスト用）
  ('550e8400-e29b-41d4-a716-446655440022', '550e8400-e29b-41d4-a716-446655440001', 1), -- 小サイズ (400円)
  ('550e8400-e29b-41d4-a716-446655440022', '550e8400-e29b-41d4-a716-446655440002', 1), -- 中サイズ (500円) ※重複
  -- 丼2 (440023): 大サイズ + 複数トッピング（SNS特典1個無料適用）
  ('550e8400-e29b-41d4-a716-446655440023', '550e8400-e29b-41d4-a716-446655440003', 1), -- 大サイズ (600円)
  ('550e8400-e29b-41d4-a716-446655440023', '550e8400-e29b-41d4-a716-446655440004', 1), -- マヨ (50円) ← SNS特典で無料
  ('550e8400-e29b-41d4-a716-446655440023', '550e8400-e29b-41d4-a716-446655440006', 1), -- カレー粉 (50円)

  -- 【注文13のカスタマイズ】SNSフォロー0件 → 全額課金
  -- 丼1 (440024): シンプルなマヨのみ
  ('550e8400-e29b-41d4-a716-446655440024', '550e8400-e29b-41d4-a716-446655440004', 1), -- マヨ (50円)
  -- 丼2 (440025): 中サイズ + 複数トッピング
  ('550e8400-e29b-41d4-a716-446655440025', '550e8400-e29b-41d4-a716-446655440002', 1), -- 中サイズ (500円)
  ('550e8400-e29b-41d4-a716-446655440025', '550e8400-e29b-41d4-a716-446655440007', 1), -- コショウ (50円)
  ('550e8400-e29b-41d4-a716-446655440025', '550e8400-e29b-41d4-a716-446655440008', 1), -- フライドオニオン (50円)
  -- 丼3 (440026): 小サイズ + マヨ大盛り（amount=2のテスト）
  ('550e8400-e29b-41d4-a716-446655440026', '550e8400-e29b-41d4-a716-446655440001', 1), -- 小サイズ (400円)
  ('550e8400-e29b-41d4-a716-446655440026', '550e8400-e29b-41d4-a716-446655440004', 2), -- マヨ×2 (50円×2=100円)
  -- 丼4 (440027): 大サイズ + フルトッピング（数量指定の複雑なテストケース）
  ('550e8400-e29b-41d4-a716-446655440027', '550e8400-e29b-41d4-a716-446655440003', 1), -- 大サイズ (600円)
  ('550e8400-e29b-41d4-a716-446655440027', '550e8400-e29b-41d4-a716-446655440006', 1), -- カレー粉 (50円)
  ('550e8400-e29b-41d4-a716-446655440027', '550e8400-e29b-41d4-a716-446655440007', 1), -- コショウ (50円)
  ('550e8400-e29b-41d4-a716-446655440027', '550e8400-e29b-41d4-a716-446655440008', 2), -- フライドオニオン×2 (50円×2=100円)

  -- 【注文14のカスタマイズ】SNSフォロー0件、シンプル注文
  ('550e8400-e29b-41d4-a716-446655440028', '550e8400-e29b-41d4-a716-446655440002', 1), -- 中サイズ (500円)

  -- 【注文15のカスタマイズ】SNSフォロー2件 → トッピング2個無料
  -- 丼1 (440029): 大サイズ + 複数トッピング（SNS特典2個無料適用）
  ('550e8400-e29b-41d4-a716-446655440029', '550e8400-e29b-41d4-a716-446655440003', 1), -- 大サイズ (600円)
  ('550e8400-e29b-41d4-a716-446655440029', '550e8400-e29b-41d4-a716-446655440004', 1), -- マヨ (50円) ← SNS特典で無料
  ('550e8400-e29b-41d4-a716-446655440029', '550e8400-e29b-41d4-a716-446655440006', 1), -- カレー粉 (50円) ← SNS特典で無料
  -- 丼2 (440030): 小サイズ + フライドオニオン（シンプル）
  ('550e8400-e29b-41d4-a716-446655440030', '550e8400-e29b-41d4-a716-446655440001', 1), -- 小サイズ (400円)
  ('550e8400-e29b-41d4-a716-446655440030', '550e8400-e29b-41d4-a716-446655440008', 1); -- フライドオニオン (50円)

COMMIT;
